---
title: "<center><b>Natality Data</b></center>"
author: "<center><b>Conney Chan, Connie Liu, Kelly Jennings</b></center>"
output:
  html_document:
    toc: yes
  html_notebook:
    toc: yes
---

<center>![babies](babies.jpg)</center>

#**Introduction**
The Natality.csv contains information of Natality in each state. This includes the baby's gender, birth weight, mother's age and total number of births.
The Census2015.cvs file contains the median age of the total population in each state.

#**R Configuration**
Below is our sessionInfo().

```{r sessionInfo}
sessionInfo(package=NULL)
```


#**ETL Script**


```{r}
source("../01 Data/ETL.R")
```
```{r, code= readLines("../01 Data/ETL.R"), eval=FALSE}
```

#**The Cleaned up data**
The cleaned up data file, Natality.csv, is on conneyc's account under dataset S17 DV Project 5. The TAs have been added as contributors and can download the file from the link provided below.

https://data.world/conneyc/s-17-dv-project-5

#**The Census Data**
The data file containing the census data we are using, Census2015.csv, is on conneyc's account under dataset S17 DV Project 5. The TAs have been added as contributors and can download the file from the link provided below.

https://data.world/conneyc/s-17-dv-project-5


#**Tableau Visualizations**

<center>![Boxplot](Births boxplot.png)</center><br>
This visualization is a boxplot of state vs births. It is filtered by Race and Births and has the detail of the gender of the births. It is observed that California has the largest number of births for female and males followed by Texas. 
<hr>

<center>![Histogram](TreemapDrag.png)</center><br>
This Treemap displays the count of the average age of mothers for each age in 0.5 bins, by race. It is colored by the count, with the race and average age as text. When the mouse is hovered over a box, it tells you the count number. For Asians, it is seen that most mothers are 30.5 years old, white mothers are 28, African Americas are 26, and Natives are 26.5. Asian mothers have babies the lastest while African Americans have them the earliest. 

<center>![Scatterplot](Scatterplot.png)</center><br>

<hr>

center>![Crosstab + KPI](Crosstab + KPI.png)</center>

This graph shows average birth weight per state by race. It is colored by the calculated field (KPI): AVG(average birth weight)/4000. The number 4000 is an average healthy birth weight in the US. The data reflects that white babies tend to weigh more than the other races.
<hr>

<center>![Crosstab + KPI 3](Crosstab + KPI 3.png)</center><br>

This graph was created by joining Natality.csv with Census2015.csv through State= AreaName. It shows the total number of births for each race per state using the data from Natality.csv. The number of births for corresponding states is colored by the Median_Age column from Census2015.csv using parameters. The parameters are low: 0-34.7, medium: 34.7-39.3, and high: 39.3+. Regardless of median age, Whites have the largest number of births followed by Black or African, Asian or Pacific Islander then American Indian or Alaska Native. However, this trend is most likely a reflection of the existing demographic where the majority of the population is White. Texas is a low Median age state and has a high number of births. 
<hr>

<center>![Bar Chart](Barchart.png)</center><br>

This graph shows average birth weight in grams for each race in each state and the reference line, but the calculated difference from average is applied. The calculated difference is the average birth weight (for that race in that state) minus the total average birth weight of all the states. It is used for color and text and displayed by the mark labels, the color of the bars, and numbers are shown when the mouse is hovered over each bar.
The data reflects that White babies and American Indian/Alaskan babies tend to weigh more than the average baby for each state.

<br>

<center>![High Median Age States](High Median Age States.png)</center><br>
This graph used data from Census2015 (Median Age) and Natality (Births, Race) joined by State.
It shows the sum of births in High Median Age States, which is a set of states which an average median age greater than 40. Each bar color is broken down by the number of births contributed by each race within that state. Average Median Age is put into detail. Maine has the highest median age. All these states have the largest number of births that are White, followed by Black, Asian and Native. Of these high median age states, Florida has the largest number of births. 

<hr>

#**Shiny Visualizations**
Our visualizations are published in an application on our accounts:

https://kellyjennings.shinyapps.io/project62/

https://conneyc.shinyapps.io/project6/

https://cliu42.shinyapps.io/project6/

Here are screenshots of the Shiny visualizations:

<center>![Barchart](barchart1.png)</center><br>

This Shiny visualization is similar to the Table Calculations Tableau visualization, filtered for states in the deep south. It compares the average birth weights of babies of different races in each state. The white text on the bars is the average birth weight for a race in that state. The red Reference Line and its label show the average birth weight per state. The blue text is a Table Calculation that shows the difference between the state and race average. An interesting observation is that for these southern states, white babies and American Indian/Alaskan native babies have birth weights above the state average while black/African American babies and Asian/Pacific Islander babies have birth weights below the state average.


<center>![ID set: High Median Age States](barchart2.png)</center><br>

This visualization is the Shiny version of our ID Set- High Median Age Tableau visualization. We filtered the data to only contain the set of states with a median age of 40 or above, which you can observe from the red Reference Line. We inner joined on columns AreaName and State in order to show the median age from the census table and the state ID from the natality table. It is interesting that the High Median Age States tend to be in the Northeast.

<center>![Births in High Median Age States](barchart3.png)</center><br>

The last visualization contains the set of High Median Age States and their number of births, colored by race. We used a join to get the median age from the census data and the number of births from the natality data. Note that the number of births reflects the population of these states, and the population of the races within these states.


